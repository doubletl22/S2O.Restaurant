{"ast":null,"code":"import * as React from 'react';\nimport { toArray } from \"../utils/commonUtil\";\nimport { injectPropsWithOption } from \"../utils/valueUtil\";\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\nexport default (options, fieldNames, searchValue, filterOption, optionFilterProp) => {\n  return React.useMemo(() => {\n    if (!searchValue || filterOption === false) {\n      return options;\n    }\n    const {\n      options: fieldOptions,\n      label: fieldLabel,\n      value: fieldValue\n    } = fieldNames;\n    const filteredOptions = [];\n    const customizeFilter = typeof filterOption === 'function';\n    const upperSearch = searchValue.toUpperCase();\n    const filterFunc = customizeFilter ? filterOption : (_, option) => {\n      // Use provided `optionFilterProp`\n      if (optionFilterProp && optionFilterProp.length) {\n        return optionFilterProp.some(prop => includes(option[prop], upperSearch));\n      }\n\n      // Auto select `label` or `value` by option type\n      if (option[fieldOptions]) {\n        // hack `fieldLabel` since `OptionGroup` children is not `label`\n        return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n      }\n      return includes(option[fieldValue], upperSearch);\n    };\n    const wrapOption = customizeFilter ? opt => injectPropsWithOption(opt) : opt => opt;\n    options.forEach(item => {\n      // Group should check child options\n      if (item[fieldOptions]) {\n        // Check group first\n        const matchGroup = filterFunc(searchValue, wrapOption(item));\n        if (matchGroup) {\n          filteredOptions.push(item);\n        } else {\n          // Check option\n          const subOptions = item[fieldOptions].filter(subItem => filterFunc(searchValue, wrapOption(subItem)));\n          if (subOptions.length) {\n            filteredOptions.push({\n              ...item,\n              [fieldOptions]: subOptions\n            });\n          }\n        }\n        return;\n      }\n      if (filterFunc(searchValue, wrapOption(item))) {\n        filteredOptions.push(item);\n      }\n    });\n    return filteredOptions;\n  }, [options, filterOption, optionFilterProp, searchValue, fieldNames]);\n};","map":{"version":3,"names":["React","toArray","injectPropsWithOption","includes","test","search","join","toUpperCase","options","fieldNames","searchValue","filterOption","optionFilterProp","useMemo","fieldOptions","label","fieldLabel","value","fieldValue","filteredOptions","customizeFilter","upperSearch","filterFunc","_","option","length","some","prop","wrapOption","opt","forEach","item","matchGroup","push","subOptions","filter","subItem"],"sources":["/Users/dangtantrieu/Documents/S2O.Restaurant/frontend/admin-portal/node_modules/@rc-component/select/es/hooks/useFilterOptions.js"],"sourcesContent":["import * as React from 'react';\nimport { toArray } from \"../utils/commonUtil\";\nimport { injectPropsWithOption } from \"../utils/valueUtil\";\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\nexport default ((options, fieldNames, searchValue, filterOption, optionFilterProp) => {\n  return React.useMemo(() => {\n    if (!searchValue || filterOption === false) {\n      return options;\n    }\n    const {\n      options: fieldOptions,\n      label: fieldLabel,\n      value: fieldValue\n    } = fieldNames;\n    const filteredOptions = [];\n    const customizeFilter = typeof filterOption === 'function';\n    const upperSearch = searchValue.toUpperCase();\n    const filterFunc = customizeFilter ? filterOption : (_, option) => {\n      // Use provided `optionFilterProp`\n      if (optionFilterProp && optionFilterProp.length) {\n        return optionFilterProp.some(prop => includes(option[prop], upperSearch));\n      }\n\n      // Auto select `label` or `value` by option type\n      if (option[fieldOptions]) {\n        // hack `fieldLabel` since `OptionGroup` children is not `label`\n        return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n      }\n      return includes(option[fieldValue], upperSearch);\n    };\n    const wrapOption = customizeFilter ? opt => injectPropsWithOption(opt) : opt => opt;\n    options.forEach(item => {\n      // Group should check child options\n      if (item[fieldOptions]) {\n        // Check group first\n        const matchGroup = filterFunc(searchValue, wrapOption(item));\n        if (matchGroup) {\n          filteredOptions.push(item);\n        } else {\n          // Check option\n          const subOptions = item[fieldOptions].filter(subItem => filterFunc(searchValue, wrapOption(subItem)));\n          if (subOptions.length) {\n            filteredOptions.push({\n              ...item,\n              [fieldOptions]: subOptions\n            });\n          }\n        }\n        return;\n      }\n      if (filterFunc(searchValue, wrapOption(item))) {\n        filteredOptions.push(item);\n      }\n    });\n    return filteredOptions;\n  }, [options, filterOption, optionFilterProp, searchValue, fieldNames]);\n});"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,qBAAqB,QAAQ,oBAAoB;AAC1D,SAASC,QAAQA,CAACC,IAAI,EAAEC,MAAM,EAAE;EAC9B,OAAOJ,OAAO,CAACG,IAAI,CAAC,CAACE,IAAI,CAAC,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC,CAACJ,QAAQ,CAACE,MAAM,CAAC;AAC9D;AACA,eAAgB,CAACG,OAAO,EAAEC,UAAU,EAAEC,WAAW,EAAEC,YAAY,EAAEC,gBAAgB,KAAK;EACpF,OAAOZ,KAAK,CAACa,OAAO,CAAC,MAAM;IACzB,IAAI,CAACH,WAAW,IAAIC,YAAY,KAAK,KAAK,EAAE;MAC1C,OAAOH,OAAO;IAChB;IACA,MAAM;MACJA,OAAO,EAAEM,YAAY;MACrBC,KAAK,EAAEC,UAAU;MACjBC,KAAK,EAAEC;IACT,CAAC,GAAGT,UAAU;IACd,MAAMU,eAAe,GAAG,EAAE;IAC1B,MAAMC,eAAe,GAAG,OAAOT,YAAY,KAAK,UAAU;IAC1D,MAAMU,WAAW,GAAGX,WAAW,CAACH,WAAW,CAAC,CAAC;IAC7C,MAAMe,UAAU,GAAGF,eAAe,GAAGT,YAAY,GAAG,CAACY,CAAC,EAAEC,MAAM,KAAK;MACjE;MACA,IAAIZ,gBAAgB,IAAIA,gBAAgB,CAACa,MAAM,EAAE;QAC/C,OAAOb,gBAAgB,CAACc,IAAI,CAACC,IAAI,IAAIxB,QAAQ,CAACqB,MAAM,CAACG,IAAI,CAAC,EAAEN,WAAW,CAAC,CAAC;MAC3E;;MAEA;MACA,IAAIG,MAAM,CAACV,YAAY,CAAC,EAAE;QACxB;QACA,OAAOX,QAAQ,CAACqB,MAAM,CAACR,UAAU,KAAK,UAAU,GAAGA,UAAU,GAAG,OAAO,CAAC,EAAEK,WAAW,CAAC;MACxF;MACA,OAAOlB,QAAQ,CAACqB,MAAM,CAACN,UAAU,CAAC,EAAEG,WAAW,CAAC;IAClD,CAAC;IACD,MAAMO,UAAU,GAAGR,eAAe,GAAGS,GAAG,IAAI3B,qBAAqB,CAAC2B,GAAG,CAAC,GAAGA,GAAG,IAAIA,GAAG;IACnFrB,OAAO,CAACsB,OAAO,CAACC,IAAI,IAAI;MACtB;MACA,IAAIA,IAAI,CAACjB,YAAY,CAAC,EAAE;QACtB;QACA,MAAMkB,UAAU,GAAGV,UAAU,CAACZ,WAAW,EAAEkB,UAAU,CAACG,IAAI,CAAC,CAAC;QAC5D,IAAIC,UAAU,EAAE;UACdb,eAAe,CAACc,IAAI,CAACF,IAAI,CAAC;QAC5B,CAAC,MAAM;UACL;UACA,MAAMG,UAAU,GAAGH,IAAI,CAACjB,YAAY,CAAC,CAACqB,MAAM,CAACC,OAAO,IAAId,UAAU,CAACZ,WAAW,EAAEkB,UAAU,CAACQ,OAAO,CAAC,CAAC,CAAC;UACrG,IAAIF,UAAU,CAACT,MAAM,EAAE;YACrBN,eAAe,CAACc,IAAI,CAAC;cACnB,GAAGF,IAAI;cACP,CAACjB,YAAY,GAAGoB;YAClB,CAAC,CAAC;UACJ;QACF;QACA;MACF;MACA,IAAIZ,UAAU,CAACZ,WAAW,EAAEkB,UAAU,CAACG,IAAI,CAAC,CAAC,EAAE;QAC7CZ,eAAe,CAACc,IAAI,CAACF,IAAI,CAAC;MAC5B;IACF,CAAC,CAAC;IACF,OAAOZ,eAAe;EACxB,CAAC,EAAE,CAACX,OAAO,EAAEG,YAAY,EAAEC,gBAAgB,EAAEF,WAAW,EAAED,UAAU,CAAC,CAAC;AACxE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}