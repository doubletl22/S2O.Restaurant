{"ast":null,"code":"import useLayoutEffect from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport { useRef } from 'react';\nconst SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  const touchedRef = useRef(false);\n  const touchXRef = useRef(0);\n  const touchYRef = useRef(0);\n  const elementRef = useRef(null);\n\n  // Smooth scroll\n  const intervalRef = useRef(null);\n\n  /* eslint-disable prefer-const */\n  let cleanUpEvents;\n  const onTouchMove = e => {\n    if (touchedRef.current) {\n      const currentX = Math.ceil(e.touches[0].pageX);\n      const currentY = Math.ceil(e.touches[0].pageY);\n      let offsetX = touchXRef.current - currentX;\n      let offsetY = touchYRef.current - currentY;\n      const isHorizontal = Math.abs(offsetX) > Math.abs(offsetY);\n      if (isHorizontal) {\n        touchXRef.current = currentX;\n      } else {\n        touchYRef.current = currentY;\n      }\n      const scrollHandled = callback(isHorizontal, isHorizontal ? offsetX : offsetY, false, e);\n      if (scrollHandled) {\n        e.preventDefault();\n      }\n\n      // Smooth interval\n      clearInterval(intervalRef.current);\n      if (scrollHandled) {\n        intervalRef.current = setInterval(() => {\n          if (isHorizontal) {\n            offsetX *= SMOOTH_PTG;\n          } else {\n            offsetY *= SMOOTH_PTG;\n          }\n          const offset = Math.floor(isHorizontal ? offsetX : offsetY);\n          if (!callback(isHorizontal, offset, true) || Math.abs(offset) <= 0.1) {\n            clearInterval(intervalRef.current);\n          }\n        }, 16);\n      }\n    }\n  };\n  const onTouchEnd = () => {\n    touchedRef.current = false;\n    cleanUpEvents();\n  };\n  const onTouchStart = e => {\n    cleanUpEvents();\n    if (e.touches.length === 1 && !touchedRef.current) {\n      touchedRef.current = true;\n      touchXRef.current = Math.ceil(e.touches[0].pageX);\n      touchYRef.current = Math.ceil(e.touches[0].pageY);\n      elementRef.current = e.target;\n      elementRef.current.addEventListener('touchmove', onTouchMove, {\n        passive: false\n      });\n      elementRef.current.addEventListener('touchend', onTouchEnd, {\n        passive: true\n      });\n    }\n  };\n  cleanUpEvents = () => {\n    if (elementRef.current) {\n      elementRef.current.removeEventListener('touchmove', onTouchMove);\n      elementRef.current.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n  useLayoutEffect(() => {\n    if (inVirtual) {\n      listRef.current.addEventListener('touchstart', onTouchStart, {\n        passive: true\n      });\n    }\n    return () => {\n      listRef.current?.removeEventListener('touchstart', onTouchStart);\n      cleanUpEvents();\n      clearInterval(intervalRef.current);\n    };\n  }, [inVirtual]);\n}","map":{"version":3,"names":["useLayoutEffect","useRef","SMOOTH_PTG","useMobileTouchMove","inVirtual","listRef","callback","touchedRef","touchXRef","touchYRef","elementRef","intervalRef","cleanUpEvents","onTouchMove","e","current","currentX","Math","ceil","touches","pageX","currentY","pageY","offsetX","offsetY","isHorizontal","abs","scrollHandled","preventDefault","clearInterval","setInterval","offset","floor","onTouchEnd","onTouchStart","length","target","addEventListener","passive","removeEventListener"],"sources":["/Users/dangtantrieu/Documents/S2O.Restaurant/frontend/admin-portal/node_modules/@rc-component/virtual-list/es/hooks/useMobileTouchMove.js"],"sourcesContent":["import useLayoutEffect from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport { useRef } from 'react';\nconst SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  const touchedRef = useRef(false);\n  const touchXRef = useRef(0);\n  const touchYRef = useRef(0);\n  const elementRef = useRef(null);\n\n  // Smooth scroll\n  const intervalRef = useRef(null);\n\n  /* eslint-disable prefer-const */\n  let cleanUpEvents;\n  const onTouchMove = e => {\n    if (touchedRef.current) {\n      const currentX = Math.ceil(e.touches[0].pageX);\n      const currentY = Math.ceil(e.touches[0].pageY);\n      let offsetX = touchXRef.current - currentX;\n      let offsetY = touchYRef.current - currentY;\n      const isHorizontal = Math.abs(offsetX) > Math.abs(offsetY);\n      if (isHorizontal) {\n        touchXRef.current = currentX;\n      } else {\n        touchYRef.current = currentY;\n      }\n      const scrollHandled = callback(isHorizontal, isHorizontal ? offsetX : offsetY, false, e);\n      if (scrollHandled) {\n        e.preventDefault();\n      }\n\n      // Smooth interval\n      clearInterval(intervalRef.current);\n      if (scrollHandled) {\n        intervalRef.current = setInterval(() => {\n          if (isHorizontal) {\n            offsetX *= SMOOTH_PTG;\n          } else {\n            offsetY *= SMOOTH_PTG;\n          }\n          const offset = Math.floor(isHorizontal ? offsetX : offsetY);\n          if (!callback(isHorizontal, offset, true) || Math.abs(offset) <= 0.1) {\n            clearInterval(intervalRef.current);\n          }\n        }, 16);\n      }\n    }\n  };\n  const onTouchEnd = () => {\n    touchedRef.current = false;\n    cleanUpEvents();\n  };\n  const onTouchStart = e => {\n    cleanUpEvents();\n    if (e.touches.length === 1 && !touchedRef.current) {\n      touchedRef.current = true;\n      touchXRef.current = Math.ceil(e.touches[0].pageX);\n      touchYRef.current = Math.ceil(e.touches[0].pageY);\n      elementRef.current = e.target;\n      elementRef.current.addEventListener('touchmove', onTouchMove, {\n        passive: false\n      });\n      elementRef.current.addEventListener('touchend', onTouchEnd, {\n        passive: true\n      });\n    }\n  };\n  cleanUpEvents = () => {\n    if (elementRef.current) {\n      elementRef.current.removeEventListener('touchmove', onTouchMove);\n      elementRef.current.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n  useLayoutEffect(() => {\n    if (inVirtual) {\n      listRef.current.addEventListener('touchstart', onTouchStart, {\n        passive: true\n      });\n    }\n    return () => {\n      listRef.current?.removeEventListener('touchstart', onTouchStart);\n      cleanUpEvents();\n      clearInterval(intervalRef.current);\n    };\n  }, [inVirtual]);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}